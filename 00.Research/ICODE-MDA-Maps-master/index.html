<!DOCTYPE html>
<html>
    <head>
        <title>ICODE-MDA Maps</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

        <!-- JQuery from Google APIs-->
        <script type="text/javascript" language="Javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="scripts/jquery.min.js"><\/script>')</script>

        <!-- ArcGIS Maps API -->
        <!--
        <link rel="stylesheet" href="http://js.arcgis.com/3.11/esri/css/esri.css">
        <link rel="stylesheet" href="http://js.arcgis.com/3.11/dijit/themes/claro/claro.css">
   
        <script src="http://js.arcgis.com/3.11/"></script>
        -->


        <!-- Initialization script -->
        <script type="text/javascript" src="scripts/initialization.js"></script>


        <!-- Google Maps API v3 -->
        <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=geometry,drawing,weather,visualization&sensor=false"></script>
        <!-- Other JS libraries -->
        <script type="text/javascript" src='scripts/infobubble.js' ></script>
        <script type="text/javascript" src="scripts/trackTimeSlider.js"></script>     
        <script type="text/javascript" src="scripts/distanceWidget.js"></script>
        <script type="text/javascript" src="scripts/CSJSRequestObject.js"></script>
        <script type="text/javascript" src="scripts/daynightoverlay.js"></script>     
        <script type="text/javascript" src="scripts/jquery.activity-indicator-1.0.0.js"></script>
        <script type="text/javascript" src="scripts/nprogress.js"></script>
        <link rel="stylesheet" type="text/css" href="css/nprogress.css">
        <script type="text/javascript" src="scripts/infobox.js"></script>
        <script type="text/javascript" src="scripts/alertclient.js"></script>
        <script type="text/javascript" src="scripts/alertsetup.js"></script>
        <script type="text/javascript" src="scripts/dragdrop.js"></script>
        <script type="text/javascript" src="scripts/maplabel-compiled.js"></script> <!-- for distance tool -->
        <script type="text/javascript" src="scripts/shapedrawing.js"></script>
        <script type="text/javascript" src="scripts/geoxml3.js"></script> <!-- for KMZ extraction and display, req'd by fileUpload.js -->
        <script type="text/javascript" src="scripts/ExtDraggableObject.js"></script> <!-- req'd by geoxml3.js -->
        <script type="text/javascript" src="scripts/ProjectedOverlay.js"></script> <!-- req'd by geoxml3.js -->
        <script type="text/javascript" src="scripts/jquery.datetimepicker.js"></script> <!-- req'd by Time Machine feature -->

        <!-- JQueryUI -->
        <!-- Theme downloaded from http://jqueryui.com/download/#!zThemeParams=5d00000100f405000000000000003d8888d844329a8dfe02723de3e5701fa198449035fc0613ff729a37dd818cf92b1f6938fefa90282d04ae436bb72367f5909357c629e832248af2c086db4ab730aa4cced933a88449eca61db9f7f3b23d47f58a712d809b6088edfb34ad39fdc365386d0fa05a1ac3ecd320d2c989729f79ebdc6c6c1efbdad4c8411d498f009ffe98fe129da7602fb950113abdae4a76a6c41a4b54b4f82bb8821d6d431cd3fdd76b9d621596a2728b93385f2e7aaf8ea6603553343d43829941536e2bdd3ed7d7d3207364bf351633b31b934a71523a88fa2058cdd4c2e0778cd56d6ccac254ddace19ff4460a100e2e6a52830d9063c6e328cc3cb5e3d6dbe1077ae8b7cc5fa6414eafd15883b40c6c3e71647031ce3da7038a945a5628669fbe0e5139dad7ce99c00f25c2cd40569bd2fe1b2caed45bf2b8943f6ac17215bd54437a0f739009848e80f1d5c00d99870e7258d07402af6b22872fdf8f2892a7e9274aaa9181573ddd8cd7788511b4459e736d76b3e64e015809712e904499648868a11e35b3bb8ee1168d6039c5a86eee8cf545c877dbdd0111ab04ede46a85a17baed0958026fe23d2e490cfa504ab598731d779a2434fa164085379d31e1ff08e2eeb9475cce3d5b3e9b2fd4df43dffe6cf0eda -->
        <script type="text/javascript" src="scripts/jquery-ui-1.10.3.custom.js"></script>
        <link rel="stylesheet" href="css/custom-jquery-ui-theme/jquery-ui-1.10.3.custom.css">


        <!-- Bootstrap (getbootstrap.com) and Bootstrap-map-js (github.com/esri/bootstrap-map-js) -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" >
        <link rel="stylesheet" href="css/bootstrap.css"> <!-- include again to override certain styles -->
        <link rel="stylesheet" href="css/bootstrapmap.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>


        <!-- Custom CSS styling -->
        <link rel="stylesheet" type="text/css" href="css/mapstyle.css">
        <link rel="stylesheet" type="text/css" href="css/jquery.datetimepicker.css"> <!-- Req'd by Time Machine feature -->


        <!-- Google Webfonts -->
        <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'  type='text/css'>


        <!-- Main JavaScript for controlling map -->
        <script type="text/javascript" src="scripts/icode-maps-google.js"></script>


        <link rel="stylesheet" type="text/css" href="clippy/clippy.css" media="all">
        <script src="clippy/clippy.js"></script>
        <script src="clippy/initialize_clippy.js"></script>
    </head>
    <body class="claro" onload="initialize()">

        <!-- NAVBAR ===================================================================== -->
        <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <div class="container">
                <!-- Brand and collapse button -->
<!--                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a id="brand" class="navbar-brand" href="#">ICODE-MDA Maps 2.0 (beta)</a>
                </div>-->

                <!-- Search and other navigation items -->
                <div id="navbar" class="navbar-collapse collapse">

                    <!-- Navigation items -->
                    <ul id="navRight" class="nav navbar-nav navbar-right">
                        <li>
                            <!-- Search bar nav -->
                            <form id="searchBarForm" class="navbar-form navbar-nav form-horizontal">
                                <div id="searchGroup" class="form-group input-group">
                                    <span class="input-group-btn">
                                        <button id="searchBtn" class="btn btn-default" type="submit">
                                            <span id="search-icon" class="glyphicon glyphicon-search"></span>
                                        </button>
                                    </span>
                                    <input id="search" class="form-control" type="text" name="query" autocomplete="off" placeholder="Search for Vessels (MMSI, IMO, vessel name, call sign, or destination)">
                                    <span id="advancedSearchToggle" class="form-control-feedback noselect glyphicon glyphicon-chevron-down"></span>
                                </div>
                            </form>

                            <div id="advancedSearchDropdown" class="panel" style="display: none">
                                <div class="panel-body">
                                    <h4>Advanced Search</h4>

                                    <form id="advancedSearchForm" class="form-horizontal" role="form">
                                        <div class="form-group">
                                            <label for="searchMMSI" class="control-label col-xs-2">MMSI</label>
                                            <div class="col-xs-10">
                                                <input class="form-control" id="searchMMSI" type="text" placeholder="123456789">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="searchIMO" class="control-label col-xs-2">IMO</label>
                                            <div class="col-xs-10">
                                                <input class="form-control" id="searchIMO" type="text" placeholder="1234567">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="searchCallSign" class="control-label col-xs-2">Call sign</label>
                                            <div class="col-xs-10">
                                                <input class="form-control" id="searchCallSign" type="text" placeholder="VXE629">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="searchDestination" class="control-label col-xs-2">Destination</label>
                                            <div class="col-xs-10">
                                                <input class="form-control" id="searchDestination" type="text" placeholder="San Diego">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-xs-offset-2 col-xs-10">
                                                <button id="advancedSearchBtn" type="submit" class="btn btn-primary">Search</button>
                                            </div>
                                        </div>
                                    </form>

                                </div>
                            </div>

                        </li>
                        <!-- Alerts nav --> 
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-bell"></span> Alerts <span class="alertCountLabel badge">0</span><span class="caret"></span></a>
                            <ul class="dropdown-menu" role="menu">
                                <li><a href="#" onclick="toggleAlertsPanel();
                                        return false;">View Alerts <span class="alertCountLabel badge">0</span></a></li>
                                <li class="divider"></li>
                                <li><a href="#">Setup New Alerts</a></li>
                                <li><a href="#">Edit Alerts</a></li>
                            </ul>
                        </li>
                        <!-- User login nav --> 
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span id="username"></span><img src="icons/loginavatar.gif" alt="Avatar" class="avatar"><span class="caret"></span></a>
                            <ul class="dropdown-menu" role="menu">
                                <li><a href="#"><span class="glyphicon glyphicon-wrench"></span> Settings</a></li>
                                <li><a href="#"><span class="glyphicon glyphicon-log-out"></span> Logout</a></li>
                            </ul>
                        </li>              
                    </ul>
                </div>
            </div>
        </nav>




        <!-- MAP CANVAS ===================================================================== -->
        <div class="container">
            <div id="map-container">
                <!-- BEGIN MAP AREA -->
                <div id="map_canvas">
                </div>
                <!-- END MAP AREA -->
            </div>
        </div>



        <!-- MENU PANEL ===================================================================== -->
        <div class="container">
            <div id="menuDiv" class="panel panel-default panel-fixed">
                <div id="menuAccordion" class="panel-group">
                    <!-- LEGEND PANEL ========================================================================== -->
                    <div id="legend-panel" class="menuPanel panel panel-primary">
                        <div id="legend-heading" class="menuHeading panel-heading">
                            <h4 class="panel-title">
                                <span data-toggle="collapse" data-parent="#accordion">Legend</span>
                            </h4>
                            <button id="legend-chevron" class="btn btn-primary btn-xs btn-expand">      
                                <span id="legend-icon" class="glyphicon glyphicon-chevron-up glyphicon-menu"></span>
                            </button>
                        </div>
                        <div id="legend-collapse" class="menuBody panel-collapse collapse in">
                            <div id="legend-body" class="panelBody panel-body text-left">
                                <h4 class="text-center">Vessel Types</h4>
                                <label>
                                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                    <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#3333FF;stroke:#3333FF;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                    </path>
                                    </svg>
                                    LAISIC AIS Observation
                                </label>
                                <br>
                                <label>
                                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="20" width="30" viewBox="-5 -10 20 20">
                                    <path d="m -6 0 6 -6 6 6 -6 6 z m 12 0 l 8 0" style="fill:#FFFF00;stroke:#222222;stroke-width:1;fill-rule:evenodd;">Browser does not support inline SVG.
                                    </path>
                                    </svg>
                                    LAISIC AIS Track
                                </label>
                                <br>
                                <label>
                                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="16" width="30" viewBox="-6 -12 20 16">
                                    <path d="M 0,-9 6,2 4,6 0,8 -4,6 -6,2 Z" style="fill:#FF0000;stroke:#000000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 2 -1)">Browser does not support inline SVG.
                                    </path>
                                    </svg>
                                    RADAR Vessels
                                </label>
                                <br>
                                <label>
                                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="16" width="30" viewBox="-6 -12 20 16">
                                    <path d="M 0,-9 6,2 4,6 0,8 -4,6 -6,2 Z" style="fill:#010101;stroke:#FF0000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 2 -1)">Browser does not support inline SVG.
                                    </path>
                                    </svg>
                                    SAR-SAR Vessels
                                </label>
                                <br>
                                <label>
                                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="16" width="30" viewBox="-6 -12 20 16">
                                    <path d="M 0,-9 6,2 4,6 0,8 -4,6 -6,2 Z" style="fill:#FF0000;stroke:#FFFF00;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 2 -1)">Browser does not support inline SVG.
                                    </path>
                                    </svg>
                                    Live LAISIC Correlations
                                </label>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkboxallships" id="All Other Vessels" name="All Other Vessels" checked="false" type="checkbox" onclick="typeSelectUpdated();"> 
                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                        <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#FFFFFF;stroke:#444444;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                        </path>
                                        </svg>
                                        All Other Vessels
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkboxtype" id="0-Unspecified Ships" name="0-Unspecified Ships" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                        <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#F78181;stroke:#780202;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                        </path>
                                        </svg>
                                        0 - Unspecified Ships<br>
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkboxtype" id="30-Fishing" name="30-Fishing" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                        <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#01DFD7;stroke:#006058;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                        </path>
                                        </svg>
                                        30 - Fishing<br>
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkboxtype" id="31-Towing" name="31-Towing" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                        <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#DF7401;stroke:#600000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                        </path>
                                        </svg>
                                        31 - Towing<br>
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkboxtype" id="32-Big Tow" name="32-Big Tow" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                        <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#DF7401;stroke:#600000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                        </path>
                                        </svg>
                                        32 - Big Tow<br>
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkboxtype" id="35-Military" name="35-Military" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                        <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#0000FF;stroke:#000080;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                        </path>
                                        </svg>
                                        35 - Military<br>
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkboxtype" id="37-Pleasure Craft" name="37-Pleasure Craft" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                        <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#8904B1;stroke:#0a0032;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                        </path>
                                        </svg>
                                        37 - Pleasure Craft<br>
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkboxtype" id="51-Search and Rescue" name="51-Search and Rescue" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                        <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#BE3C14;stroke:#3f0000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                        </path>
                                        </svg>
                                        51 - Search & Rescue<br>
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkboxtype" id="52-Tug" name="52-Tug" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                        <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#DF7401;stroke:#600000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                        </path>
                                        </svg>
                                        52 - Tug<br>
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkboxtype" id="33-Dredge" name="33-Dredge" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                        <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#DF7401;stroke:#600000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                        </path>
                                        </svg>
                                        33 - Dredge<br>
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkboxtype" id="50-Pilot" name="50-Pilot" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                        <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#DF7401;stroke:#600000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                        </path>
                                        </svg>
                                        50 - Pilot<br>
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkboxtype" id="55-Law Enforcement" name="55-Law Enforcement" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                        <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#0000FF;stroke:#000080;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                        </path>
                                        </svg>
                                        55 - Law Enforcement<br>
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkboxtype" id="6x-Passenger Vessels" name="6x-Passenger Vessels" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                        <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#01DF01;stroke:#006000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                        </path>
                                        </svg>
                                        6x - Passenger Vessels<br>
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkboxtype" id="7x-Cargo Vessels" name="7x-Cargo Vessels" checked="checked" type="checkbox" onclick="typeSelectUpdated();"> 
                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                        <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#01DF01;stroke:#006000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                        </path>
                                        </svg>
                                        7x - Cargo Vessels<br>
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkboxtype" id="8x-Tankers" name="8x-Tankers" checked="checked"  type="checkbox" onclick="typeSelectUpdated();"> 
                                        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                        <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#01DF01;stroke:#006000;stroke-width:1;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                        </path>
                                        </svg>
                                        8x - Tankers<br>
                                    </label>
                                </div>

                                <hr>
                                <h4 class="text-center">Risk Level</h4>
                                <form role="form">
                                    <label><input type="checkbox" id="Risk" name="Risk" onclick="toggleRisk();
                                            refreshLayers();"> Enable risk information</label>
                                </form>
                                <label>Vessel Outline:</label><br>
                                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#FFFFFF;stroke:#00F014;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                </path>
                                </svg>
                                Low Risk<br>
                                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#FFFFFF;stroke:#F0FF78;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                </path>
                                </svg>
                                Medium Risk<br>
                                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="14" width="30" viewBox="-5 -10 15 15">
                                <path d="M 0,10 4,10 4,-3 0,-10 -4,-3 -4,10 z" style="fill:#FFFFFF;stroke:#FF0014;stroke-width:2;fill-rule:evenodd;" transform="rotate(90 0 0)">Browser does not support inline SVG.
                                </path>
                                </svg>
                                High Risk<br>

                                <hr>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkbox" id="IHSTabs" name="IHSTabs" type="checkbox" onclick="toggleIHSTabs();"> Enable IHS Tabs<br>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- DATA LAYERS PANEL ===================================================================== -->
                    <div id="data-panel" class="menuPanel panel panel-primary noselect">
                        <div id="data-heading" class="menuHeading panel-heading">
                            <h4 class="panel-title">
                                <span data-toggle="collapse" data-parent="#accordion">Data Layers</span>
                            </h4>
                            <button id="data-chevron" class="btn btn-primary btn-xs btn-expand">      
                                <span id="data-icon" class="glyphicon glyphicon-chevron-down glyphicon-menu"></span>
                            </button>
                        </div>
                        <div id="data-collapse" class="menuBody panel-collapse collapse">
                            <div class="panelBody panel-body text-left">

                                <h4 class="text-center">Layers Shown:</h4>
                                <ul id="displayedLayersList" class="list-unstyled connectedSortable">

                                    <!-- AIS Layer +++++++++++++++++++++++++++++++++++++++++++++++++++++++++  -->
                                    <li id="aisLayer" class="panel panel-success">
                                        <div class="layerHeading panel-heading">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <span class="hideShowLayerBtn glyphicon glyphicon-minus-sign"></span>
                                                    AIS Layer
                                                </div>
                                                <div class="col-md-1 vcenter">
                                                    <div class="spinner spinnerForLayers"></div>
                                                </div>
                                            </div>
                                            <button class="layersOptionsBtn btn btn-success btn-xs btn-expand">
                                                Options
                                                <span class="glyphicon glyphicon-chevron-down glyphicon-menu"></span>
                                            </button>
                                        </div>
                                        <div class="layerBody panel-body panel-collapse collapse">
                                            <h4 class="text-center">AIS Sources</h4>
                                            <form role="form">
                                                <div><label><input type="radio" id="allaissources" name="aissources" checked="checked" onclick="refreshLayers();"> All AIS Sources</label></div>
                                                <div><label><input type="radio" id="mssisonly" name="aissources" onclick="refreshLayers();"> Terrestrial AIS Only</label></div>
                                                <div><label><input type="radio" id="sataisonly" name="aissources" onclick="refreshLayers();"> Satellite AIS Only</label></div>
                                            </form>

                                            <hr>
                                            <h4 class="text-center">History Trail</h4>
                                            <form role="form">
                                                <label>History trail length:</label>
                                                <select id="history_trail_length" onChange="history_trail_length_changed();">
                                                    <option value="no limit">No limit</option>
                                                    <option value="0.25" selected="selected">6 hours</option>
                                                    <option value="0.5" selected="selected">12 hours</option>
                                                    <option value="1" selected="selected">1 day</option>
                                                    <option value="2">2 days</option>
                                                    <option value="3">3 days</option>
                                                    <option value="4">4 days</option>
                                                    <option value="5">5 days</option>
                                                    <option value="6">6 days</option>
                                                    <option value="7">7 days</option>
                                                    <option value="8">8 days</option>
                                                    <option value="9">9 days</option>
                                                    <option value="10">10 days</option>
                                                    <option value="11">11 days</option>
                                                    <option value="12">12 days</option>
                                                    <option value="13">13 days</option>
                                                    <option value="14">14 days</option>
                                                    <option value="15">15 days</option>
                                                    <option value="31">31 days</option>
                                                </select>
                                            </form>
                                            <div class="checkbox">
                                                <label>
                                                    <input class="checkbox" id="showtrackicons" name="showtrackicons" type="checkbox" checked="checked" onclick="toggleTrackIcons();"> Enable track icons
                                                </label>
                                            </div>
                                            <div class="checkbox">
                                                <label>
                                                    <input class="checkbox" id="queryalltracks" name="queryalltracks" type="checkbox" onclick="toggleQueryAllTracks();"> Query tracks for vessels in view
                                                </label>
                                            </div>

                                            <hr>
                                            <h4 class="text-center">Visual Options</h4>
                                            <form role="form">
                                                <label>Vessel Icon Size:</label>
                                                <input type="button" onclick="decreaseVesselIconSize()" value="-"></input>
                                                <input type="button" onclick="increaseVesselIconSize()" value="+"></input>
                                                <input type="button" onclick="resetVesselIconSize()" value="Reset"></input>
                                            </form>
                                            <div class="checkbox">
                                                <label>
                                                    <input class="checkbox" id="enableCluster" name="Enable Clusters" type="checkbox" checked="checked" onclick="toggleCluster(true);"> Enable Clusters
                                                </label>
                                            </div>
                                            <div class="checkbox">
                                                <label>
                                                    <input class="checkbox" id="HeatmapLayer" name="HeatmapLayer" type="checkbox" onclick="toggleHeatmapLayer();"> Enable Heatmap
                                                </label>
                                            </div>

                                            <hr>
                                            <h4 class="text-center">SQL Query</h4>
                                            <div class="input-group input-group-sm">
                                                <span class="input-group-addon queryButton">Query</span>
                                                <input type="text" class="form-control queryStatement">
                                            </div>
                                        </div>
                                    </li>

                                    <!-- RADAR Layer +++++++++++++++++++++++++++++++++++++++++++++++++++++++++  -->
                                    <li id="radarLayer" class="panel panel-success">
                                        <div class="layerHeading panel-heading">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <span class="hideShowLayerBtn glyphicon glyphicon-minus-sign"></span>
                                                    RADAR Layer
                                                </div>
                                                <div class="col-md-1 vcenter">
                                                    <div class="spinner spinnerForLayers"></div>
                                                </div>
                                            </div>
                                            <button class="layersOptionsBtn btn btn-success btn-xs btn-expand">
                                                Options
                                                <span class="glyphicon glyphicon-chevron-down glyphicon-menu"></span>
                                            </button>
                                        </div>
                                        <div class="layerBody panel-body panel-collapse collapse">
                                            <h4 class="text-center">SQL Query</h4>
                                            <div class="input-group input-group-sm">
                                                <span class="input-group-addon queryButton">Query</span>
                                                <input type="text" class="form-control queryStatement">
                                            </div>
                                        </div>
                                    </li>

                                    <!-- SAT-SAR Layer +++++++++++++++++++++++++++++++++++++++++++++++++++++++++  -->
                                    <li id="satsarLayer" class="panel panel-success">
                                        <div class="layerHeading panel-heading">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <span class="hideShowLayerBtn glyphicon glyphicon-minus-sign"></span>
                                                    SAT-SAR Layer
                                                </div>
                                                <div class="col-md-1 vcenter">
                                                    <div class="spinner spinnerForLayers"></div>
                                                </div>
                                            </div>
                                            <button class="layersOptionsBtn btn btn-success btn-xs btn-expand">
                                                Options
                                                <span class="glyphicon glyphicon-chevron-down glyphicon-menu"></span>
                                            </button>
                                        </div>
                                        <div class="layerBody panel-body panel-collapse collapse">
                                            <h4 class="text-center">SQL Query</h4>
                                            <div class="input-group input-group-sm">
                                                <span class="input-group-addon queryButton">Query</span>
                                                <input type="text" class="form-control queryStatement">
                                            </div>
                                        </div>
                                    </li>

                                    <!-- SAT-EO Layer +++++++++++++++++++++++++++++++++++++++++++++++++++++++++  -->
                                    <li id="sateoLayer" class="panel panel-success">
                                        <div class="layerHeading panel-heading">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <span class="hideShowLayerBtn glyphicon glyphicon-minus-sign"></span>
                                                    SAT-EO Layer
                                                </div>
                                                <div class="col-md-1 vcenter">
                                                    <div class="spinner spinnerForLayers"></div>
                                                </div>
                                            </div>
                                            <button class="layersOptionsBtn btn btn-success btn-xs btn-expand">
                                                Options
                                                <span class="glyphicon glyphicon-chevron-down glyphicon-menu"></span>
                                            </button>
                                        </div>
                                        <div class="layerBody panel-body panel-collapse collapse">
                                            <h4 class="text-center">SQL Query</h4>
                                            <div class="input-group input-group-sm">
                                                <span class="input-group-addon queryButton">Query</span>
                                                <input type="text" class="form-control queryStatement">
                                            </div>
                                        </div>
                                    </li>

                                    <!-- LIVE LAISIC Layer ++++++++++++++++++++++++++++++++++++++++++++++++++++  -->
                                    <li id="livelaisicLayer" class="panel panel-success">
                                        <div class="layerHeading panel-heading">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <span class="hideShowLayerBtn glyphicon glyphicon-minus-sign"></span>
                                                    Live LAISIC Layer
                                                </div>
                                                <div class="col-md-1 vcenter">
                                                    <div class="spinner spinnerForLayers"></div>
                                                </div>
                                            </div>
                                            <button class="layersOptionsBtn btn btn-success btn-xs btn-expand">
                                                Options      
                                                <span class="glyphicon glyphicon-chevron-down glyphicon-menu"></span>
                                            </button>
                                        </div>
                                        <div class="layerBody panel-body panel-collapse collapse">
                                            <div class="btn-group">
                                                <button id="vesselstablenewwindowbutton" class="btn btn-primary" onClick="window.open('icode-table.html');
                                                        return false;">Open Vessels Tables</button>
                                            </div>                             
                                            <div class="checkbox">
                                                <label>
                                                    <input class="checkbox" id="LAISIC_TARGETS" name="LAISIC_TARGETS" type="checkbox" onclick="refreshLayers();"> Display LAISIC targets
                                                </label>
                                            </div>
                                            <div class="checkbox">
                                                <label>
                                                    <input class="checkbox" id="error ellipses" name="error ellipses" type="checkbox" checked="checked" onclick=";"> Draw error ellipses on trackicons
                                                </label>
                                            </div>
                                        </div>
                                    </li>

                                </ul> <!-- END shown layers -->

                                <hr>
                                <h4 class="text-center">Available Layers:</h4>
                                <ul id="hiddenLayersList" class="list-unstyled connectedSortable">

                                    <!-- LAISIC Layer +++++++++++++++++++++++++++++++++++++++++++++++++++++++++  -->
                                    <li id="laisicLayer" class="panel panel-default">
                                        <div class="layerHeading panel-heading">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <span class="hideShowLayerBtn glyphicon glyphicon-plus-sign"></span>
                                                    LAISIC Layer
                                                </div>
                                                <div class="col-md-1 vcenter">
                                                    <div class="spinner spinnerForLayers"></div>
                                                </div>
                                            </div>
                                            <button class="layersOptionsBtn btn btn-default btn-xs btn-expand">
                                                Options      
                                                <span class="glyphicon glyphicon-chevron-down glyphicon-menu"></span>
                                            </button>
                                        </div>
                                        <div class="layerBody panel-body panel-collapse collapse">
                                            <div class="btn-group">
                                                <button id="vesselstablenewwindowbutton" class="btn btn-primary" onClick="window.open('icode-table.html');
                                                        return false;">Open Vessels Tables</button>
                                            </div>                             
                                            <div class="checkbox">
                                                <label>
                                                    <input class="checkbox" id="LAISIC_TARGETS" name="LAISIC_TARGETS" type="checkbox" onclick="refreshLayers();"> Display LAISIC targets
                                                </label>
                                            </div>
                                            <div class="checkbox">
                                                <label>
                                                    <input class="checkbox" id="error ellipses" name="error ellipses" type="checkbox" checked="checked" onclick=";"> Draw error ellipses on trackicons
                                                </label>
                                            </div>
                                        </div>
                                    </li>

                                    <!-- KMZ Layer +++++++++++++++++++++++++++++++++++++++++++++++++++++++++  -->
                                    <li id="kmzLayer" class="panel panel-default">
                                        <div class="layerHeading panel-heading">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <span class="hideShowLayerBtn glyphicon glyphicon-plus-sign"></span>
                                                    KMZ Layer
                                                </div>
                                                <div class="col-md-1 vcenter">
                                                    <div class="spinner spinnerForLayers"></div>
                                                </div>
                                            </div>
                                            <button class="layersOptionsBtn btn btn-default btn-xs btn-expand">
                                                Options
                                                <span class="glyphicon glyphicon-chevron-down glyphicon-menu"></span>
                                            </button>
                                        </div>
                                        <div class="layerBody panel-body panel-collapse collapse">

                                            <form id="kmzform" role="form">
                                                <label class="control-label">Select a KMZ File:</label>
                                                <span class="file-input file-input-new">
                                                    <div class="input-group ">
                                                        <input class="form-control file-caption kmz-fileinput-caption file-caption-name">
                                                        <div class="input-group-btn">
                                                            <!-- remove button goes here -->
                                                            <!--
                                                            <button type="submit" class="btn btn-default fileinput-upload" onclick="fileUpload(this.form,'kmz/kmzextract.php','upload'); return false;">
                                                               <i class="glyphicon glyphicon-upload"></i>
                                                            </button>
                                                            -->
                                                            <div class="btn btn-primary btn-file">
                                                                <i class="glyphicon glyphicon-folder-open"></i>
                                                                <input id="browseKMZ" type="file" class="file" accept=".kmz" data-show-preview="false">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </span>
                                            </form>

                                            <div class="progress">
                                                <div id="kmzprogressbar" class="progress-bar progress-bar-striped" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                                                </div>
                                            </div>

                                            <label class="control-label">Uploaded KMZ Layers:</label>
                                            <ul id="uploadedkmzlayers" class="list-group">
                                            </ul>

                                        </div>
                                    </li>

                                    <!-- Day/Night Layer +++++++++++++++++++++++++++++++++++++++++++++++++++++++++  -->
                                    <li id="daynightLayer" class="panel panel-default">
                                        <div class="layerHeading panel-heading">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <span class="hideShowLayerBtn glyphicon glyphicon-plus-sign"></span>
                                                    Day/Night Layer
                                                </div>
                                                <div class="col-md-1 vcenter">
                                                    <div class="spinner spinnerForLayers"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layerBody panel-body panel-collapse collapse">
                                            <!-- Options here -->
                                        </div>
                                    </li>

                                    <!-- Traffic Layer +++++++++++++++++++++++++++++++++++++++++++++++++++++++++  -->
                                    <li id="trafficLayer" class="panel panel-default">
                                        <div class="layerHeading panel-heading">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <span class="hideShowLayerBtn glyphicon glyphicon-plus-sign"></span>
                                                    Traffic Layer
                                                </div>
                                                <div class="col-md-1 vcenter">
                                                    <div class="spinner spinnerForLayers"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layerBody panel-body panel-collapse collapse">
                                            <!-- Options here -->
                                        </div>
                                    </li>

                                    <!-- Weather Layer +++++++++++++++++++++++++++++++++++++++++++++++++++++++++  -->
                                    <li id="weatherLayer" class="panel panel-default">
                                        <div class="layerHeading panel-heading">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <span class="hideShowLayerBtn glyphicon glyphicon-plus-sign"></span>
                                                    Weather
                                                </div>
                                                <div class="col-md-1 vcenter">
                                                    <div class="spinner spinnerForLayers"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layerBody panel-body panel-collapse collapse">
                                            <!-- Options here -->
                                        </div>
                                    </li>

                                    <!-- Port Layer +++++++++++++++++++++++++++++++++++++++++++++++++++++++++  -->
                                    <li id="portsLayer" class="panel panel-default">
                                        <div class="layerHeading panel-heading">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <span class="hideShowLayerBtn glyphicon glyphicon-plus-sign"></span>
                                                    Port Layer
                                                </div>
                                                <div class="col-md-1 vcenter">
                                                    <div class="spinner spinnerForLayers"></div>
                                                </div>
                                            </div>
                                            <button class="layersOptionsBtn btn btn-default btn-xs btn-expand">
                                                Options
                                                <span class="glyphicon glyphicon-chevron-down glyphicon-menu"></span>
                                            </button>
                                        </div>
                                        <div class="layerBody panel-body panel-collapse collapse">
                                            <h4 class="text-center">SQL Query</h4>
                                            <div class="input-group input-group-sm">
                                                <span class="input-group-addon queryButton">Query</span>
                                                <input type="text" class="form-control queryStatement">
                                            </div>
                                        </div>
                                    </li>

                                    <!-- FMV Layer +++++++++++++++++++++++++++++++++++++++++++++++++++++++++  -->
                                    <li id="fmvLayer" class="panel panel-default">
                                        <div class="layerHeading panel-heading">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <span class="hideShowLayerBtn glyphicon glyphicon-plus-sign"></span>
                                                    FMV Layer
                                                </div>
                                                <div class="col-md-1 vcenter">
                                                    <div class="spinner spinnerForLayers"></div>
                                                </div>
                                            </div>
                                            <button class="layersOptionsBtn btn btn-default btn-xs btn-expand">
                                                Options      
                                                <span class="glyphicon glyphicon-chevron-down glyphicon-menu"></span>
                                            </button>
                                        </div>
                                        <div class="layerBody panel-body panel-collapse collapse">
                                            <label>
                                                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="16" width="30" viewBox="-10 -9 15 16">
                                                <path d="M 0, 0 m -6, 0 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0" style="fill:#FF0000;stroke:#000000;stroke-width:1;fill-rule:evenodd;">Browser does not support inline SVG.
                                                </path>
                                                </svg> FMV Layer
                                            </label>

                                            <hr>
                                            <h4 class="text-center">SQL Query</h4>
                                            <div class="input-group input-group-sm">
                                                <span class="input-group-addon queryButton">Query</span>
                                                <input type="text" class="form-control queryStatement">
                                            </div>
                                        </div>
                                    </li>

                                    <!-- EEZ Layer +++++++++++++++++++++++++++++++++++++++++++++++++++++++++  -->
                                    <li id="eezLayer" class="panel panel-default">
                                        <div class="layerHeading panel-heading">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <span class="hideShowLayerBtn glyphicon glyphicon-plus-sign"></span>
                                                    EEZ Layer
                                                </div>
                                                <div class="col-md-1 vcenter">
                                                    <div class="spinner spinnerForLayers"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layerBody panel-body panel-collapse collapse">
                                            <!-- Options here -->
                                        </div>
                                    </li>

                                    <!-- TMACS Layer +++++++++++++++++++++++++++++++++++++++++++++++++++++++++  -->
                                    <li id="tmacsLayer" class="panel panel-default ui-state-disabled">
                                        <div class="layerHeading panel-heading">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <span class="hideShowLayerBtn glyphicon glyphicon-plus-sign"></span>
                                                    TMACS Layer
                                                </div>
                                                <div class="col-md-1 vcenter">
                                                    <div class="spinner spinnerForLayers"></div>
                                                </div>
                                            </div>
                                            <button class="layersOptionsBtn btn btn-default btn-xs btn-expand">
                                                Options      
                                                <span class="glyphicon glyphicon-chevron-down glyphicon-menu"></span>
                                            </button>
                                        </div>
                                        <div class="layerBody panel-body panel-collapse collapse">
                                            <div id="tmacslayer">
                                                <center><b>TMACS WMS</b></center>

                                                <div class="checkbox">
                                                    <label>
                                                        <input class="checkbox" id="TMACShead" name="TMACShead" type="checkbox" onclick="toggleTMACSHeadWMSLayer();"> TMAC Trackheads
                                                    </label>
                                                </div>
                                                <div class="checkbox">
                                                    <label>
                                                        <input class="checkbox" id="TMACShistory" name="TMACShistory" type="checkbox" onclick="toggleTMACSHistoryWMSLayer();"> Track History
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </li>

                                    <!-- Country Border Layer +++++++++++++++++++++++++++++++++++++++++++++++++++  -->
                                    <li id="countryBordersLayer" class="panel panel-default">
                                        <div class="layerHeading panel-heading">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <span class="hideShowLayerBtn glyphicon glyphicon-plus-sign"></span>
                                                    Country Borders
                                                </div>
                                                <div class="col-md-1 vcenter">
                                                    <div class="spinner spinnerForLayers"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="layerBody panel-body panel-collapse collapse">
                                            <div class="checkbox">
                                                <label>
                                                    <input class="checkbox" id="enableCountryBorders" name="enableCountryBorders" type="checkbox" onclick="toggleCountryBorders();"> Enable country borders
                                                </label>
                                            </div>
                                        </div>
                                    </li>

                                    <!-- Custom Layer +++++++++++++++++++++++++++++++++++++++++++++++++++++++++  -->
                                    <li id="customlayer" class="panel panel-default">
                                        <div class="layerHeading panel-heading">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <span class="hideShowLayerBtn glyphicon glyphicon-plus-sign"></span>
                                                    Custom Defined
                                                </div>
                                                <div class="col-md-1 vcenter">
                                                    <div class="spinner spinnerForLayers"></div>
                                                </div>
                                            </div>
                                            <button class="layersOptionsBtn btn btn-default btn-xs btn-expand">
                                                Options      
                                                <span class="glyphicon glyphicon-chevron-down glyphicon-menu"></span>
                                            </button>
                                        </div>
                                        <div class="layerBody panel-body panel-collapse collapse">
                                            <!-- Options here -->
                                        </div>
                                    </li>
                                </ul> <!-- END hidden layers -->
                            </div>
                        </div>
                    </div> <!-- END data-panel -->

                    <!-- GLOBAL OPTIONS PANEL ================================================================== -->
                    <div id="options-panel" class="menuPanel panel panel-primary">
                        <div id="options-heading" class="menuHeading panel-heading">
                            <h4 class="panel-title">
                                <span data-toggle="collapse" data-parent="#accordion">Global Options</span>
                            </h4>
                            <button id="options-chevron" class="btn btn-primary btn-xs btn-expand">      
                                <span id="options-icon" class="glyphicon glyphicon-chevron-down glyphicon-menu"></span>
                            </button>
                        </div>
                        <div id="options-collapse" class="menuBody panel-collapse collapse">
                            <div class="panelBody panel-body text-left">
                                <div class="checkbox">
                                    <label>
                                        <input class="checkbox" id="showtargetlabels" name="Show Target Names" type="checkbox" checked="checked" onclick="toggleShowTargetLabels();"> Show target names
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkbox" id="distancetooltoggle" name="distancetooltoggle" type="checkbox" onclick="toggleDistanceTool();"> Enable distance tool
                                    </label>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkbox" id="adaptiveMapType" name="adaptiveMapType" type="checkbox" onclick="adaptiveMapType();" checked="checked"> Change map type with zoom
                                    </label>
                                </div>

                                <hr>
                                <form role="form">
                                    <label>Show data up to</label>
                                    <select id="vessel_age" onChange="vessel_age_changed(true);">
                                        <option value="no limit">No limit</option>
                                        <option value="0.0833333333333333">5 mins</option>
                                        <option value="0.25" selected="selected">15 mins</option>
                                        <option value="0.5">30 mins</option>
                                        <option value="1">1 hours</option>
                                        <option value="2">2 hours</option>
                                        <option value="3">3 hours</option>
                                        <option value="4">4 hours</option>
                                        <option value="5">5 hours</option>
                                        <option value="6">6 hours</option>
                                        <option value="7">7 hours</option>
                                        <option value="8">8 hours</option>
                                        <option value="9">9 hours</option>
                                        <option value="10">10 hours</option>
                                        <option value="11">11 hours</option>
                                        <option value="12">12 hours</option>
                                        <option value="24">24 hours</option>
                                        <option value="48">48 hours</option>
                                        <option value="72">72 hours</option>
                                        <option value="168">1 week</option>
                                        <option value="730">1 month</option>
                                        <option value="8765">1 year</option>
                                    </select>
                                </form>
                                from
                                <input type="text" value="Now" id="timemachineend"> UTC
                                <hr>
                                <div id="refreshoptions">
                                    <b>Refresh Options:</b><br>
                                    <div class="checkbox">
                                        <label>
                                            <input class="checkbox" id="autoRefresh" name="autoRefresh" type="checkbox" checked="checked" onclick="toggleAutoRefresh();"> Automatically refresh
                                        </label>
                                    </div>
                                    <form role="form">
                                        <label>Auto-refresh rate:</label>
                                        <select id="refresh_rate" onChange="refresh_rate_changed(true);">
                                            <option value="0.16">10 seconds</option>
                                            <option value="0.5">30 seconds</option>
                                            <option value="1" selected="selected">1 minute</option>
                                            <option value="5">5 minutes</option>
                                            <option value="10">10 minutes</option>
                                            <option value="30">30 minutes</option>
                                        </select>
                                    </form>
                                    <form role="form">
                                        <label>Reload delay:</label>
                                        <select id="reload_delay" onChange="reload_delay_changed();">
                                            <option value="0">0</option>
                                            <option value="1" selected="selected">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                        </select> seconds
                                    </form>
                                </div>
                                <div class="checkbox">
                                    <label>
                                        <input class="checkbox" id="neverRefresh" name="neverRefresh" type="checkbox" onclick="toggleNeverAutoRefresh();"> Never refresh unless manually triggered (by hitting spacebar)
                                    </label>
                                </div>

                                <hr>
                                <a id="viewurl" href="" onmouseover="getCurrentViewURL()">URL of current view</a>
                                <hr>
                                <p>
                                    <b>Hidden Tricks:</b><br>
                                <ul>
                                    <li>Right click a target to quickly acquire track history.</li>
                                    <li>Right click track history to delete.</li>
                                    <li>Don't query tracks for vessels in view if many vessels are in view!</li>
                                    <li>Click the black vertical bar on the right to hide this menu.</li>
                                    <li>Click anywhere on the map to hide a visible infoBubble.</li>
                                    <li>Click on track history markers to display dead-reckoning prediction to next point in history.</li>
                                    <li>Press '?' for Keyboard shortcuts.</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                </div> <!-- END panel-group accordion -->
            </div> <!-- END menuDiv -->
        </div> <!-- END container -->


        <!-- OTHER ELEMENTS ===================================================================== -->

        <!-- Status, results, and busy indicator -->
        <div id="loadingPanel" class="panel panel-info">
            <!-- Loading panel and spinning activity indicator visible when queries are running -->
            <div id="loadingHeading" class="panel-heading">
                <div class="row">
                    <div class="col-md-1 vcenter">
                    </div>
                    <div class="col-md-6 vcenter">
                        <div>
                            <h4>Loading</h4>
                        </div>
                    </div>
                    <div class="col-md-2 vcenter">
                        <div class="spinner"> </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="stats">
            <!-- result count and query time to be shown here -->
        </div>

        <div id="status-msg">
            Currently showing RADAR and raw full AIS
        </div>

        <div id="latlong">
            Mouse cursor (lat, lon)
        </div>

        <div id="lastUpdated">
            <div id="lastUpdatedText"></div>
        </div>

        <div id="keyboard-shortcut-modal" title="Keyboard Shortcuts">
            <p> 
           <pre>
           <b>?</b>&#9;&#9; Display this shortcut dialog box<br>
           <b>Spacebar</b>&#9; Refresh targets in current view<br>
           <b>A</b>&#9;&#9; Toggle auto-refresh targets<br>
           <b>C</b>&#9;&#9; Clear all tracks<br>
           <b>G</b>&#9;&#9; Toggle clustering<br>
           <b>H</b>&#9;&#9; Hide/show menu panel<br>
           <b>L</b>&#9;&#9; Toggle LAISIC/AIS targets<br>
           <b>N</b>&#9;&#9; Toggle showing vessel names<br>
           <b>P</b>&#9;&#9; Toggle port layer<br>
           <b>Q</b>&#9;&#9; Select the query bar<br>
           <b>R</b>&#9;&#9; Refresh browser<br>
           <b>W</b>&#9;&#9; Toggle weather layer<br>
           <b>-</b>&#9;&#9; Zoom out<br>
           <b>+</b>&#9;&#9; Zoom in<br>
           <b>Arrows keys</b>&#9; Pan around map<br>
           <b>ESC</b>&#9;&#9; Close this dialog box<br>
           </pre>
        </p>


    </div>

    <form id="geocode-form" role="form">
        <div id="geocodepanel" class="form-group">
            <div class="input-group">
                <input id="geocodeAddress" class="form-control" type="text" placeholder="Enter Location Name or Lat,Lon" value="San Diego, CA">
                <span id="geocodeWarning" style="display:none" class="form-control-feedback noselect glyphicon glyphicon-warning-sign"></span>
                <span class="input-group-btn">
                    <input type="button" class="btn btn-success" value="Set Map Center" onclick="codeAddress()">
                </span>
            </div>
        </div>
    </form>

    <div id="drop-container"><div id="drop-silhouette"></div></div>

    <div id="alertPanel">
        <div id="alertAccordion" class="accordion">
            <h3 id="alertSummaryheading"><b>Real-time Alerts</b></h3>
            <div id="alertSummary">
                <div>
                    <span class="alertLabel">Connecting...</span><br>
                    <b>Total decoded:</b> <span class="processedCountLabel">0</span><br>
                    <b>Total messages matching alerts:</b> <span class="alertCountLabel">0</span><br>
                </div>

                <p align=center>
                    <input id="setupAlert" type="button" onClick="$('#alertSummaryheading').click();
                            setupAlertInitialize();
                            return false;" value="Setup New Alert">
                </p>
            </div>
        </div>
    </div>

</body>
</html>

